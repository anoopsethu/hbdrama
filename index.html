<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Happy Birthday Rama!</title>
	<!-- Primary Meta Tags -->
	<meta name="title" content="Happy Birthday Rama!">
	<meta name="description" content="Happy Birthday Rama">

	<!-- Open Graph / Facebook -->
	<meta property="og:type" content="website">
	<meta property="og:url" content="https://hbdrama.co/">
	<meta property="og:title" content="Happy Birthday Rama!">
	<meta property="og:description" content="Happy Birthday Rama">
	<!-- <meta property="og:image" content="https://hbdsupriya.xyz/img/og-image.png"> -->

	<!-- Twitter -->
	<meta property="twitter:card" content="summary_large_image">
	<meta property="twitter:url" content="https://hbdrama.co/">
	<meta property="twitter:title" content="Happy Birthday Rama!">
	<meta property="twitter:description" content="Happy Birthday Rama">
	<meta property="twitter:image" content="https://hbdrama.co/img/og-image.png">

  <link rel="stylesheet" href="./css/normalize.css">
  <link rel="stylesheet" href="./style.css">
  <link rel="icon" type="image/png" sizes="32x32" href="./favicon-32x32.png">
</head>
<body>
<div class="mob"></div>
<div class="bg-overlay" id="bg-overlay">
</div>
<div class="main-container">
	<div class="outer-container" id="outer">
		<div class="card-container" id="card">
			<div class="card-inner-container">
				<img src="img/hbd-logo.svg" class="hbd-logo">
				<div class="rama">
					<div id="head" class="head">
						<img src="img/head/1.png">
					</div>
					<div id="hair" class="hair">
						<img src="img/hair/1.png">
					</div>
					<div id="shades" class="shades">
						<img src="img/shades/1.png">
					</div>
					<div id="torso" class="torso">
						<img src="img/shirt/1.png">
					</div>
				</div>
			</div>
			<div class="btn-container">
				<a class="btn" onclick="changeHair()">
					<img src="img/btn/hair-btn.png">
				</a>
				<a class="btn" onclick="changeShades()">
					<img src="img/btn/shades-btn.png">
				</a>
				<a class="btn" onclick="changeShirt()">
					<img src="img/btn/shirt-btn.png">
				</a>
				<a class="btn" onclick="changeMask()">
					<img src="img/btn/mask-btn.png">
				</a>
				<a class="btn" onclick="changeBG()">
					<img src="img/btn/bg-btn.png">
				</a>
				<a class="btn" onclick="DownloadAsImage()">
					<img src="img/btn/download-btn.png">
				</a>
			</div>
		</div>
	</div>
</div>	

<p class="footer">Crafted with ðŸ’–, @zetaux</p>

<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
<script type="text/javascript" src="js/html2canvas.min.js"></script>
<script type="text/javascript">
	
// const el = document.querySelector("#bg-overlay");

// el.addEventListener("mousemove", (e) => {
//   el.style.backgroundPositionX = -e.offsetX + "px";
//   el.style.backgroundPositionY = -e.offsetY + "px";
// });

function changeHair(){
	// var list = [1,2,3,4,5,6,7];
	// var curr = $("#hair img").attr('src').substr(9, 1);
	// console.log("curr: ", curr);
	// var i = list.indexOf(Number(curr));
	// console.log("i: ", i);
	// list.splice(i, 1);
	// console.log("list: ", list);
	// console.log(curr, 9999999);
	// var random = list[Math.floor(Math.random() * list.length) + 1];
	// $("#hair img").attr('src', 'img/hair/' + random + '.png');
	var random = Math.floor(Math.random() * 7) + 1;
	$("#hair img").attr('src', 'img/hair/' + random + '.png');
}

function changeShades(){
	var random = Math.floor(Math.random() * 3) + 1;
	$("#shades img").attr('src', 'img/shades/' + random + '.png');
}

function changeShirt(){
	var random = Math.floor(Math.random() * 6) + 1;
	$("#torso img").attr('src', 'img/shirt/' + random + '.png');
}

function changeBG(){
	var random = Math.floor(Math.random() * 5) + 1;
	$("#card").css("background-image", "url(./img/bg/" + random + ".png)");  
}


function downloadURI(uri, name) {
    var link = document.createElement("a");

    link.download = name;
    link.href = uri;
    document.body.appendChild(link);
    link.click();
}



function DownloadAsImage() {
    // var element = $("#card")[0];
    // html2canvas(element).then(function (canvas) {
    //     var myImage = canvas.toDataURL();
    //     downloadURI(myImage, "cartao-virtual.png");
    // });

 //    html2canvas(document.body, {
	//     letterRendering: 1, 
	// 	allowTaint : true, 
	// 	foreignObjectRendering: true,
	// 	useCORS: true,
	// }).then(canvas => {
	// 	var myImage = canvas.toDataURL();
 //        downloadURI(myImage, "cartao-virtual.png");
	// });


	html2canvas(document.querySelector("#card"), { logging: true, letterRendering: 1, 
		allowTaint: true, 
		useCORS: true,
		foreignObjectRendering: true,
	}).then(canvas => {

		console.log(canvas);

		var myImage = canvas.toDataURL();
        downloadURI(myImage, "cartao-virtual.png");
	});



}

</script>

</body>
</html>
